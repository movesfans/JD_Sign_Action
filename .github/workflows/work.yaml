name: JD_Sign_Action

on:
  repository_dispatch:
  release:
    types: published
  # push:
  #   branches:
  #     - master
  schedule:
    - cron: 0 20 * * *
  watch:
    types: started
    
env:
  JD_COOKIE: __jdu=15883897629901810454234; shshshfpa=4ed7756d-3739-bc29-0445-12350708d588-1588389766; shshshfpb=oCyLXCAMwsWRICnPOVRJqFA%3D%3D; pinId=nSdJsuHUqulLct7VK9KT9LV9-x-f3wj7; pin=jd_7ae18734e8001; unick=%E4%B8%9C%E5%8C%97%E6%B1%82%E4%BD%9B; _tp=LwIGalZC73gpzQXmJAPjoYemurJ9FUKzwSyrQM6t6x0%3D; _pst=jd_7ae18734e8001; user-key=0873046c-b052-46fa-bc43-064e765143bb; TrackID=1IoUWee-AzmKJu9unexiTnCa2cNqcf0ZYn5Mg3L5-1rSDkUIY9eCw0SJka9U9qdIHQW2q3NuUqZ0zeDIRRwISAnDvFZGWA4n7RgVKrvS4lxUATzoBueu4NHbq0cgYt64v; cn=12; unpl=V2_ZzNtbUpVEBRxDU4DeEtfBWIBFFRKV0QRIA0WVX4cD1FiBEdYclRCFnUUR1RnGlsUZwIZX0tcQxxFCEdkfh1eAmUzIlxyVEMlfThGUHIQXgxvBRVeSl9CFXwIR1F%2fHF8HYjMiWnJnGEAbDUFSKElcVWcDEQ8VX3MVcApGU3ocXgZvMxNtQlJGHXQIRFV4EGxOCQJfXUZeShd8AEBTeBFUBGcKElxHU0YWdw12VUsa; areaId=53283; ipLoc-djd=53283-53309-0-0; thor=593D75C6655512DD07CFB77D2BB8BAD953DA73ADBF47D9A46DFA8484A835BC6483ADECBDEAB4643F842E0029B32E02C2D0E644066AF450201F30F9AF8A2C0FB56D751DB61039B89FF7E4789E134B69577D22DD00A97F11AE973646B8E37D9B2CFA2BD73C35FD9B55126A223A00A967B05C311F3BA26BFF3C5A7FE866259FB22AA65F53612B4A8C1FD7640F3C59B548D8A65340E69CCAF970C1B17CAFFBB0640E; shshshfp=1448658b9229c708cc8086dfa48a58c6; __jdv=76161171|www.infinitynewtab.com|t_45363_|tuiguang|93b0549f2c2143789165d4a044be46d4|1611628848214; shshshsID=8a3d4885f5bac7fc15430976af8c3482_4_1611628850770; __jda=122270672.15883897629901810454234.1588389763.1611126886.1611628570.29; __jdc=122270672; __jdb=122270672.11.15883897629901810454234|29.1611628570 ${{ secrets.JD_COOKIE }}
  JD_DUAL_COOKIE: ${{ secrets.JD_DUAL_COOKIE }}
  PUSH_KEY: SCU155069Tf3cfc4d72141d03df5bd3c0bd045dd91600f85a3995c0 ${{ secrets.PUSH_KEY }}
  UPLOAD_BESULT_DIR: true

jobs:
    build:
        runs-on: ubuntu-latest

        steps:
            - name: Checkout codes
              uses: actions/checkout@v2
              
            - name: Use Node.js
              uses: actions/setup-node@v1
              with:
                node-version: '12.x'
                
            - name: Run install
              run: npm install
              
            - name: Run Script
              run: node jd_sign.js
                
            - name: Upload result file
              uses: actions/upload-artifact@master
              if: env.UPLOAD_BESULT_DIR == 'true'
              with:
                name: result
                path: ./*.txt


